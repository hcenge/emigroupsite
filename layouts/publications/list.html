{{ define "title" }}{{ .Title }}{{ end }}
{{ define "main" }}
<section class="bbc-publications">
  <h1 class="bbc-heading">{{ .Title }}</h1>

  <div class="bbc-publications__intro">
    {{ .Content }}
  </div>

  {{ if site.Data.publications }}
  <div class="bbc-publications__list">
    {{ range site.Data.publications }}
    {{ if eq .type "journal-article" }}
    <article class="bbc-publication">
      <div>
        <h3 class="bbc-publication__title">
          {{ if .url }}
          <a href="{{ .url }}" target="_blank" rel="noopener">{{ .title }}</a>
          {{ else }}
          {{ .title }}
          {{ end }}
        </h3>
        <p class="bbc-publication__authors">{{ .authors }}</p>
      </div>

      <div class="bbc-publication__meta">
        {{ if .venue }}<span class="bbc-publication__venue">{{ .venue }}</span>{{ end }}
        {{ if .year }}<span class="bbc-publication__year">{{ .year }}</span>{{ end }}
        {{ if .citations }}<span class="bbc-publication__citations">{{ .citations }} citations</span>{{ end }}
      </div>
    </article>
    {{ end }}
    {{ end }}
  </div>
  {{ else }}
  <div class="bbc-publications__empty">
    <p>Publications data not yet loaded. Run the fetch script to populate this page:</p>
    <pre>cd scripts
python fetch_publications.py YOUR_SCHOLAR_ID</pre>
  </div>
  {{ end }}
</section>
{{ end }}
