{{ define "title" }}{{ .Title }}{{ end }}
{{ define "main" }}
<section class="bbc-publications">
  <h1 class="bbc-heading">{{ .Title }}</h1>

  <div class="bbc-publications__intro">
    {{ .Content }}
  </div>

  {{ $pubs := site.Data.publications }}
  {{ if $pubs }}
  <div class="bbc-publications__list">
    {{ range $pubs }}
    <article class="bbc-publication">
      <div>
        <h3 class="bbc-publication__title">
          {{ if .url }}
          <a href="{{ .url }}" target="_blank" rel="noopener">{{ .title }}</a>
          {{ else }}
          {{ .title }}
          {{ end }}
        </h3>
        <p class="bbc-publication__authors">{{ .authors }}</p>
      </div>

      <div class="bbc-publication__meta">
        {{ with .journal }}<span class="bbc-publication__venue">{{ . }}</span>{{ end }}
        {{ if and (not .journal) .conference }}<span class="bbc-publication__venue">{{ .conference }}</span>{{ end }}
        {{ with .year }}<span class="bbc-publication__year">{{ . }}</span>{{ end }}
        <!-- {{ with .doi }}<span class="bbc-publication__doi"><a href="https://doi.org/{{ . }}" target="_blank" rel="noopener">doi:{{ . }}</a></span>{{ end }} -->
        {{ with .citations }}<span class="bbc-publication__citations">{{ . }} citations</span>{{ end }}
      </div>
    </article>
    {{ end }}
  </div>
  {{ else }}
  <div class="bbc-publications__empty">
    <p>Publications data not yet loaded. Run the fetch script to populate this page:</p>
    <pre>cd scripts
python fetch_publications.py YOUR_SCHOLAR_ID</pre>
  </div>
  {{ end }}
</section>
{{ end }}
