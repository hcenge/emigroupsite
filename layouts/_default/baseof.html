<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>{{ block "title" . }}{{ .Title }} | {{ .Site.Title }}{{ end }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    {{ $researchCSS := resources.Get "css/research.css" | fingerprint }}
    <link rel="stylesheet" href="{{ $researchCSS.RelPermalink }}" integrity="{{ $researchCSS.Data.Integrity }}">
    {{ block "head" . }}{{ end }}
  </head>
  <body class="bbc-shell">
    <header class="bbc-topbar">
      <button class="bbc-hamburger" id="menu-toggle" aria-label="Toggle menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
      <div class="bbc-brand">
        <a href="/" class="bbc-logo">
          <span class="bbc-logo__block">E</span>
          <span class="bbc-logo__word">nergy</span>
          <span class="bbc-logo__block">M</span>
          <span class="bbc-logo__word">aterials</span>
          <span class="bbc-logo__block">I</span>
          <span class="bbc-logo__word">nterfaces</span>
        </a>
      </div>
    </header>
    {{ with site.Menus.main }}
    <nav class="bbc-nav" id="main-nav">
      {{ range . }}
      <a href="{{ .URL }}">{{ .Name }}</a>
      {{ end }}
    </nav>
    {{ end }}
    <main class="bbc-main">
      {{ block "main" . }}{{ end }}
    </main>
    <footer class="bbc-footer">
      <p>&copy; {{ now.Format "2006" }} {{ .Site.Title }}. All rights reserved.</p>
    </footer>
    <script>
      // Parallax scroll effect for hero banner
      document.addEventListener('DOMContentLoaded', function() {
        const banner = document.getElementById('hero-banner');
        if (banner) {
          const bg = banner.querySelector('.bbc-hero-banner-parallax__bg');

          function updateParallax() {
            const scrolled = window.pageYOffset;
            const bannerHeight = banner.offsetHeight;

            if (scrolled < bannerHeight) {
              const yPos = scrolled * 0.5;
              bg.style.transform = `translate3d(0, ${yPos}px, 0)`;
            }
          }

          window.addEventListener('scroll', updateParallax, { passive: true });
        }

        // Hamburger menu toggle
        const menuToggle = document.getElementById('menu-toggle');
        const mainNav = document.getElementById('main-nav');

        if (menuToggle && mainNav) {
          menuToggle.addEventListener('click', function() {
            menuToggle.classList.toggle('active');
            mainNav.classList.toggle('active');
          });

          // Close menu when clicking a link
          const navLinks = mainNav.querySelectorAll('a');
          navLinks.forEach(link => {
            link.addEventListener('click', function() {
              menuToggle.classList.remove('active');
              mainNav.classList.remove('active');
            });
          });
        }
      });
    </script>
  </body>
</html>
